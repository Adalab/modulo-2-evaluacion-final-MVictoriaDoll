const d=document.querySelector(".js__listcharacters"),f=document.querySelector(".js__favoritecharacters"),m=document.querySelector(".js_searchButton"),v=document.querySelector(".js__characters-input");let s=[],a=[];const u=e=>{const o=e.currentTarget.dataset.id,t=s.find(c=>c._id.toString()===o.toString()),r=a.find(c=>c._id.toString()===o.toString());r===void 0?(a.push(t),e.currentTarget.classList.add("favorite"),localStorage.setItem("favs",JSON.stringify(a)),n()):(a.splice(r,1),e.currentTarget.classList.remove("favorite"),localStorage.setItem("favs",JSON.stringify(a)),n())},h=e=>{e.stopPropagation();const o=e.currentTarget.dataset.id;console.log("Clicked remove ID:",o);const t=a.findIndex(r=>r._id.toString()===o.toString());if(t!==-1){const r=a.splice(t,1);console.log("Removed from favorites:",r);const c=document.querySelector(`.js__charactercard[data-id="${o}"]`);c&&c.classList.remove("favorite"),localStorage.setItem("favs",JSON.stringify(a)),n()}},g=e=>{e.stopPropagation(),a=[],document.querySelectorAll(".js__charactercard").forEach(t=>{t.classList.remove("favorite")}),localStorage.setItem("favs",JSON.stringify(a)),n()};function _(e){e.preventDefault();const o=v.value;fetch(`https://api.disneyapi.dev/character?pageSize=50&name=${encodeURIComponent(o)}`).then(t=>t.json()).then(t=>{s=t.data,l(),l()})}const S=()=>{fetch("//api.disneyapi.dev/character?pageSize=50").then(e=>e.json()).then(e=>{s=e.data,console.log("characters array:",s),l()})},p=()=>{const e=JSON.parse(localStorage.getItem("favs"));e!==null&&(a=e,n())},i=(e,o=!1)=>{if(!e)return console.error("Character is null"),"";let t=e.imageUrl;t||(t="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney");let r="";return r+=`<li class="js__charactercard card" data-id="${e._id}">`,r+=`<img src="${t}" class="card-img" alt="${e.name}"">`,r+=`<h3 class= "card__name">${e.name} </h3>`,o&&(r+=`<button class="remove_btn js__removeFavorite" data-id="${e._id}">X</button>`),r+="</li>",r},l=()=>{let e="";for(let t of s)e+=i(t);d.innerHTML=e;const o=document.querySelectorAll(".js__charactercard");for(const t of o)t.addEventListener("click",u)};function n(){let e="";for(const r of a)e+=i(r,!0);a.length>0&&(e+='<button class="removeAll_btn js__removeAllFavorites"">Eliminar todos</button>'),f.innerHTML=e;const o=document.querySelectorAll(".js__removeFavorite"),t=document.querySelector(".js__removeAllFavorites");console.log("remove button",t);for(const r of o)console.log("hice click",r),r.addEventListener("click",h);t&&t.addEventListener("click",g)}p();S();m.addEventListener("click",_);
//# sourceMappingURL=main.js.map

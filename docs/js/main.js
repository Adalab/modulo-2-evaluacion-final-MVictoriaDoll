const d=document.querySelector(".js__listcharacters"),f=document.querySelector(".js__favoritecharacters"),m=document.querySelector(".js_searchButton"),v=document.querySelector(".js__characters-input");let s=[],r=[];const h=e=>{const c=e.currentTarget.dataset.id;console.log(c);const t=s.find(a=>a._id.toString()===c.toString()),o=r.find(a=>a._id.toString()===c.toString());console.log("clickenadi",o),o===void 0?(r.push(t),e.currentTarget.classList.add("favorite"),localStorage.setItem("favs",JSON.stringify(r)),n()):(r.splice(o,1),e.currentTarget.classList.remove("favorite"),localStorage.setItem("favs",JSON.stringify(r)),n())},u=e=>{e.stopPropagation();const c=e.currentTarget.dataset.id;console.log("Clicked remove ID:",c);const t=r.findIndex(o=>o._id.toString()===c.toString());if(t!==-1){const o=r.splice(t,1);console.log("Removed from favorites:",o);const a=document.querySelector(`.js__charactercard[data-id="${c}"]`);a&&a.classList.remove("favorite"),localStorage.setItem("favs",JSON.stringify(r)),n()}},g=e=>{e.stopPropagation(),r=[],document.querySelectorAll(".js__charactercard").forEach(t=>{t.classList.remove("favorite")}),localStorage.setItem("favs",JSON.stringify(r)),n()};function _(e){e.preventDefault();const c=v.value;fetch(`https://api.disneyapi.dev/character?pageSize=50&name=${encodeURIComponent(c)}`).then(t=>t.json()).then(t=>{s=t.data,l(),l()})}const S=()=>{fetch("//api.disneyapi.dev/character?pageSize=50").then(e=>e.json()).then(e=>{s=e.data,console.log("characters array:",s),l()})},p=()=>{const e=JSON.parse(localStorage.getItem("favs"));e!==null&&(r=e,n())},i=(e,c=!1)=>{let t=e.imageUrl;t||(t="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney");let o="";return o+=`<li class="js__charactercard card" data-id="${e._id}">`,o+=`<img src="${t}" class="card-img" alt="${e.name}"">`,o+=`<h3 class= "card__name">${e.name} </h3>`,c&&(o+=`<button class="remove_btn js__removeFavorite" data-id="${e._id}">X</button>`),o+="</li>",o},l=()=>{let e="";for(let t of s)e+=i(t);d.innerHTML=e;const c=document.querySelectorAll(".js__charactercard");for(const t of c)t.addEventListener("click",h)};function n(){let e="";for(const o of r)e+=i(o,!0);r.length>0&&(e+='<button class="removeAll_btn js__removeAllFavorites"">X</button>'),f.innerHTML=e;const c=document.querySelectorAll(".js__removeFavorite"),t=document.querySelector(".js__removeAllFavorites");console.log("remove button",t);for(const o of c)console.log("hice click",o),o.addEventListener("click",u);t&&t.addEventListener("click",g)}p();S();m.addEventListener("click",_);
//# sourceMappingURL=main.js.map
